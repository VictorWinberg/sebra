{"version":3,"file":"DataTable-JDXJfEtx.js","sources":["../../src/ui-component/DataTableDesktop.tsx","../../src/ui-component/DataTableMobile.tsx","../../node_modules/.pnpm/@mui+icons-material@5.15.17_@mui+material@5.15.17_@emotion+react@11.11.4_@types+react@18.3.1__ja4zlrgizp3rymmmuglkdwew7u/node_modules/@mui/icons-material/Add.js","../../node_modules/.pnpm/@mui+icons-material@5.15.17_@mui+material@5.15.17_@emotion+react@11.11.4_@types+react@18.3.1__ja4zlrgizp3rymmmuglkdwew7u/node_modules/@mui/icons-material/Delete.js","../../src/ui-component/DataTable.tsx"],"sourcesContent":["import { useState } from 'react';\n\n// material-ui\nimport { MaterialReactTable, type MRT_TableOptions } from 'material-react-table';\n\n// project imports\nimport { DataTableProps, useDataTable } from '@/hooks/useDataTable';\nimport { FilterParam, StringParam, useQueryParam } from '@/hooks/useQueryParam';\nimport { CustomActions, CustomProps, RowActions } from './DataTable';\nimport { sxFlex } from './extended/FlexGrow';\n\nconst DataTableDesktop = <T extends Record<string, unknown>>({\n  editDisplayMode: _editDisplayMode = 'row',\n  state,\n  ...props\n}: DataTableProps<T>) => {\n  const [columnFilters, setColumnFilters] = useQueryParam('filters', FilterParam, []);\n  const [globalFilter, setGlobalFilter] = useQueryParam('search', StringParam, '');\n  const [editDisplayMode, setEditDisplayMode] = useState<MRT_TableOptions<T>['editDisplayMode']>(_editDisplayMode);\n  const custom: CustomProps<T> = { editDisplayMode, setEditDisplayMode };\n\n  const table = useDataTable<T>({\n    editDisplayMode,\n    initialState: { showGlobalFilter: !!globalFilter },\n    state: { columnFilters, globalFilter, ...state },\n    onColumnFiltersChange: setColumnFilters,\n    onGlobalFilterChange: setGlobalFilter,\n    onCreatingRowSave: async ({ row, values, table }) => {\n      await props.onCreate?.({ ...row.original, ...values } as T);\n      table.setCreatingRow(null);\n      setEditDisplayMode(_editDisplayMode);\n    },\n    onEditingRowSave: async ({ row, values, table }) => {\n      await props.onUpdate?.({ ...row.original, ...values } as T);\n      table.setEditingRow(null);\n      setEditDisplayMode(_editDisplayMode);\n    },\n    displayColumnDefOptions: {\n      'mrt-row-actions': { minSize: 120, size: 120, maxSize: 120, grow: false }\n    },\n    muiTablePaperProps: { sx: { ...sxFlex, mx: -1, boxShadow: 0 } },\n    muiTableContainerProps: { sx: { ...sxFlex, height: '300px' } },\n    positionActionsColumn: 'last',\n    renderRowActions: RowActions<T>(props, custom),\n    renderTopToolbarCustomActions: CustomActions<T>(),\n    muiTableBodyCellProps: ({ row, column, table }) => ({\n      onDoubleClick: () => {\n        setEditDisplayMode('row');\n        table.setEditingRow(table.getState().editingRow === row ? null : row);\n\n        queueMicrotask(() => {\n          const field = table.refs.editInputRefs.current[column.id];\n          field?.focus();\n        });\n      },\n      onKeyDown: (event) => {\n        if (event.key === 'Escape') {\n          table.setEditingRow(null);\n        }\n\n        if (event.key === 'Enter') {\n          table.options.onEditingRowSave?.({\n            exitEditingMode: () => table.setEditingRow(null),\n            row,\n            table,\n            values: row?._valuesCache\n          });\n        }\n      }\n    }),\n    ...props\n  });\n\n  return <MaterialReactTable table={table} />;\n};\n\nexport default DataTableDesktop;\n","import { useState } from 'react';\n\n// material-ui\nimport { Box, Card, CardContent, Typography } from '@mui/material';\nimport { MRT_EditRowModal, MRT_TableBodyCell, MRT_TableOptions, MRT_TopToolbar } from 'material-react-table';\n\n// project imports\nimport { DataTableProps, useDataTable } from '@/hooks/useDataTable';\nimport { CustomActions, CustomProps, RowActions } from './DataTable';\n\nconst DataTableMobile = <T extends Record<string, unknown>>({\n  editDisplayMode: _editDisplayMode = 'row',\n  ...props\n}: DataTableProps<T>) => {\n  const [editDisplayMode, setEditDisplayMode] = useState<MRT_TableOptions<T>['editDisplayMode']>(_editDisplayMode);\n  const custom: CustomProps<T> = { editDisplayMode, setEditDisplayMode };\n\n  const table = useDataTable<T>({\n    editDisplayMode,\n    enableColumnFilters: false,\n    enableDensityToggle: false,\n    positionActionsColumn: 'last',\n    renderRowActions: RowActions<T>(props, custom),\n    ...props,\n    // Overrides for mobile\n    renderTopToolbarCustomActions: CustomActions<T>()\n  });\n\n  // Can we do a better fix for this?\n  if (table.getState().isLoading) return null;\n\n  const { creatingRow, editingRow } = table.getState();\n  const { rows } = table.getRowModel();\n\n  return (\n    <Box>\n      <MRT_TopToolbar table={table} />\n      {rows.map((row) => (\n        <Card key={row.id} variant=\"outlined\" sx={{ my: 1 }}>\n          <CardContent sx={{ py: 1 }}>\n            {row.getVisibleCells().map((cell) => {\n              return (\n                <Box\n                  sx={{ my: 1, display: 'flex', flexDirection: 'row', alignItems: 'baseline', gap: 1 }}\n                  key={cell.id}\n                >\n                  <Typography variant=\"body2\" fontWeight={600}>\n                    {cell.column.columnDef.header}:\n                  </Typography>\n                  <MRT_TableBodyCell\n                    component={Box}\n                    table={table}\n                    cell={cell}\n                    rowRef={null!}\n                    staticRowIndex={row.index}\n                    sx={{ p: 0, border: 0 }}\n                  />\n                </Box>\n              );\n            })}\n          </CardContent>\n        </Card>\n      ))}\n      {(creatingRow || (editDisplayMode === 'modal' && editingRow)) && <MRT_EditRowModal open table={table} />}\n    </Box>\n  );\n};\n\nexport default DataTableMobile;\n","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z\"\n}), 'Add');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z\"\n}), 'Delete');","// material-ui\nimport { Box, IconButton, Tooltip, useMediaQuery, useTheme } from '@mui/material';\nimport { MRT_Row, MRT_RowData, MRT_TableInstance, MRT_TableOptions } from 'material-react-table';\nimport { bindTrigger } from 'material-ui-popup-state';\n\n// project imports\nimport { DataTableProps } from '@/hooks/useDataTable';\nimport DataTableDesktop from './DataTableDesktop';\nimport DataTableMobile from './DataTableMobile';\nimport DeleteConfirm from './DeleteConfirm';\n\n// assets\nimport AddIcon from '@mui/icons-material/Add';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\n\nconst DataTable = <T extends Record<string, unknown>>(props: DataTableProps<T>) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  return isMobile ? <DataTableMobile {...props} /> : <DataTableDesktop {...props} />;\n};\n\nexport const CustomActions = <T extends MRT_RowData>() => {\n  return ({ table }: { table: MRT_TableInstance<T> }) => (\n    <IconButton onClick={() => table.setCreatingRow(true)}>\n      <AddIcon />\n    </IconButton>\n  );\n};\n\nexport interface CustomProps<T extends Record<string, unknown>> {\n  editDisplayMode: MRT_TableOptions<T>['editDisplayMode'];\n  setEditDisplayMode: (mode: MRT_TableOptions<T>['editDisplayMode']) => void;\n}\n\nexport const RowActions = <T extends MRT_RowData>(props: DataTableProps<T>, custom: CustomProps<T>) => {\n  return ({ row, table }: { row: MRT_Row<T>; table: MRT_TableInstance<T> }) => (\n    <Box sx={{ display: 'flex', gap: '1rem' }}>\n      <Tooltip title=\"Edit\">\n        <IconButton onClick={() => [table.setEditingRow(row), custom.setEditDisplayMode('modal')]}>\n          <EditIcon />\n        </IconButton>\n      </Tooltip>\n      <DeleteConfirm\n        id={row.id}\n        onClick={() => {\n          props.onDelete?.(row.original);\n          table.setEditingRow(null);\n        }}\n      >\n        {(popupState) => (\n          <Tooltip title=\"Delete\">\n            <IconButton color=\"error\" {...bindTrigger(popupState)}>\n              <DeleteIcon />\n            </IconButton>\n          </Tooltip>\n        )}\n      </DeleteConfirm>\n    </Box>\n  );\n};\n\nexport default DataTable;\n"],"names":["DataTableDesktop","_editDisplayMode","state","props","columnFilters","setColumnFilters","useQueryParam","FilterParam","globalFilter","setGlobalFilter","StringParam","editDisplayMode","setEditDisplayMode","useState","custom","table","useDataTable","row","values","_a","sxFlex","RowActions","CustomActions","column","field","event","jsx","MaterialReactTable","DataTableMobile","creatingRow","editingRow","rows","Box","MRT_TopToolbar","Card","CardContent","cell","jsxs","Typography","MRT_TableBodyCell","MRT_EditRowModal","_interopRequireDefault","require$$0","Add","default_1","_createSvgIcon","require$$1","_jsxRuntime","require$$2","Delete","DataTable","theme","useTheme","useMediaQuery","IconButton","AddIcon","Tooltip","EditIcon","DeleteConfirm","popupState","bindTrigger","DeleteIcon"],"mappings":"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","x_google_ignoreList":[2,3]}