import{K as v,j as i,a0 as C,a1 as f,a2 as b,F as p,I as D,T as y,a3 as S,f as h,B as k}from"./index-4JUCeTbF.js";import{g as z,h as P,C as A}from"./useSnackbar-CkwChgxw.js";const B=v(i.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),E=({children:t,...n})=>i.jsx(C,{variant:"popover",popupId:`delete-popup-${n.id}`,children:e=>i.jsxs(i.Fragment,{children:[t(e),i.jsx(f,{...b(e),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:i.jsxs(p,{children:[i.jsx(D,{children:i.jsx(y,{variant:"body1",children:"Är du säker på att du vill ta bort?"})}),i.jsxs(S,{children:[i.jsx(h,{fullWidth:!0,onClick:e.close,color:"inherit",variant:"outlined",children:"Avbryt"}),i.jsx(h,{startIcon:i.jsx(B,{}),fullWidth:!0,onClick:s=>{var r;return[(r=n.onClick)==null?void 0:r.call(n,s),e.close()]},color:"error",variant:"contained",children:"Ta bort"})]})]})})]})});function I(t,n){const{getState:e,options:{onCreatingRowCancel:s,onCreatingRowSave:r,onEditingRowCancel:l,onEditingRowSave:a},setCreatingRow:o,setEditingRow:c}=t,{creatingRow:d,editingRow:x,isSaving:g}=e(),u=(d==null?void 0:d.id)===n.id,m=(x==null?void 0:x.id)===n.id;return{creatingRow:d,isSaving:g,handleCancel:()=>{u?(s==null||s({row:n,table:t}),o(null)):m&&(l==null||l({row:n,table:t}),c(null))},handleSubmit:j=>{u?r==null||r({exitCreatingMode:()=>o(null),row:n,table:t,values:j}):m&&(a==null||a({exitEditingMode:()=>c(null),row:n,table:t,values:j}))}}}const H=({table:t,row:n,titles:e,FormComponent:s,defaultValues:r})=>{const{creatingRow:l,isSaving:a,handleCancel:o,handleSubmit:c}=I(t,n);return i.jsxs(i.Fragment,{children:[i.jsx(z,{variant:"h4",color:"primary",children:l?e.creating:e.editing}),i.jsx(P,{children:i.jsx(s,{sx:{mt:1},formProps:{values:{...r,...n.original}},onSubmit:c,renderBottomContent:()=>i.jsxs(k,{sx:{mt:3,ml:"auto"},children:[i.jsx(h,{onClick:o,sx:{minWidth:"100px"},children:"Avbryt"}),i.jsxs(h,{disabled:a,type:"submit",sx:{minWidth:"100px"},variant:"contained",children:[a&&i.jsx(A,{color:"inherit",size:18}),"Spara"]})]})})})]})};export{E as D,H as S,B as a};
