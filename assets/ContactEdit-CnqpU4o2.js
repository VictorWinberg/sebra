import{i as f,k as C,j as t,B as b,S as j,f as s,l as h,T as I}from"./index-CrsItGNb.js";import{A as k}from"./AssignmentTable-DTt3pkSC.js";import{u as v}from"./useAssignmentsQueries-ERgm0P45.js";import{u as S,I as L}from"./useInteractionsQueries-BjGZjOBQ.js";import{C as T}from"./ContentTabs-fGxNcqXs.js";import{a as y}from"./DataTable-DM_ryVCp.js";import{F as A}from"./FlexGrow-BMot7ywk.js";import{f as B}from"./date-TrUW26PT.js";import{u as D,a as F,b as P,C as w}from"./useContactsMutations-Rye3W_Tz.js";import{a as E}from"./useContactsQueries-DK_yCSyW.js";import"./useSnackbar-Bi9CGwI5.js";import"./MoreHoriz-BKr7J65Q.js";import"./index.esm-DrRyMUXG.js";import"./Tooltip-BSJFdB2q.js";import"./useAssignmentsMutations-XvA_e-RO.js";import"./useCompaniesQueries-BdARXKKN.js";import"./useQueryParam-yBg21OeV.js";const Z=()=>{const e=f(),n=C(),{data:o,isLoading:r}=E(e.id==="new"?void 0:Number(e.id)),{mutate:i}=D(),{mutate:c}=F(),{mutate:m}=P(),{data:d=[],isLoading:l}=v(),{data:p=[],isLoading:u}=S(o?{contactId:o.contactId}:void 0),g=a=>{o?c(a):i(a,{onSuccess:x=>n(`/home/contacts/${x.contactId}`)})};if(!r)return t.jsx(w,{formProps:{values:o},onSubmit:g,renderTopContent:()=>t.jsxs(b,{sx:{position:"relative",mt:1,mb:3},children:[t.jsxs(j,{spacing:2,direction:"row",sx:{position:"absolute",right:0},children:[o&&t.jsx(y,{onClick:()=>m(o,{onSuccess:()=>n("..")}),children:a=>t.jsx(s,{variant:"outlined",color:"error",...h(a),children:"Ta bort"})}),t.jsx(s,{variant:"outlined",color:"primary",onClick:()=>n(-1),children:"Avbryt"}),t.jsx(s,{type:"submit",variant:"contained",color:"primary",children:"Spara"})]}),t.jsx(I,{variant:"h4",color:"primary",children:o?"Redigera kontakt":"Lägg till kontakt"})]}),renderBottomContent:()=>o&&t.jsx(A,{children:t.jsx(T,{tabs:[{id:"interactions",label:"Interaktioner",content:t.jsx(L,{interactions:p,isLoading:u,defaultValues:{contacts:[o],interactionDate:B()}})},{id:"seeking",label:"Söker",content:t.jsx(t.Fragment,{children:"Söker..."})},{id:"assignments",label:"Uppdrag",content:t.jsx(k,{assignments:d.filter(a=>a.externalContactPersonId===o.contactId||a.responsiblePersonId===o.contactId),isLoading:l})}]})})})};export{Z as default};
