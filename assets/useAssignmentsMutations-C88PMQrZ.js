import{j as t,G as o,x as i,r as v,C as S,t as g,w as x}from"./index-YJqmW9KL.js";import{u as k,C as l}from"./index.esm-Ckl5Vq71.js";import{u as A}from"./useCompaniesQueries-NfGHUcxQ.js";import{u as E}from"./useContactsQueries-BDDHK5Vo.js";import{S as I,A as d,u as b}from"./SebraForm-BHSdrVvv.js";import{b as w,c as q,d as O,e as _}from"./useAssignmentsQueries-CwSf4xVb.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new n.Error().stack;s&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[s]="7e29dc81-24ed-48cd-87da-6657790fd0b9",n._sentryDebugIdIdentifier="sentry-dbid-7e29dc81-24ed-48cd-87da-6657790fd0b9")}catch{}})();const U=({formProps:n,...s})=>{const{data:m=[]}=w(),{data:p=[]}=E(),{data:f=[]}=A(),{register:c,control:u,formState:{errors:h},handleSubmit:j}=k(n);return t.jsx(I,{...s,handleSubmit:j,children:t.jsxs(o,{container:!0,spacing:2,children:[t.jsx(o,{item:!0,xs:12,children:t.jsx(i,{fullWidth:!0,label:"Uppdragsnamn",type:"text",margin:"none",...c("assignmentName",{required:!0}),error:!!h.assignmentName})}),t.jsx(o,{item:!0,xs:12,sm:4,children:t.jsx(l,{name:"status",control:u,render:({field:a})=>t.jsx(d,{freeSolo:!0,options:m,value:m.find(e=>e===a.value)||null,onChange:(e,r)=>a.onChange(r??""),renderInput:e=>t.jsx(i,{...e,label:"Status",variant:"outlined",fullWidth:!0})})})}),t.jsx(o,{item:!0,xs:12,sm:4,children:t.jsx(i,{fullWidth:!0,label:"Typ",margin:"none",type:"text",...c("type")})}),t.jsx(o,{item:!0,xs:12,sm:4,children:t.jsx(i,{fullWidth:!0,label:"Arvode",margin:"none",type:"number",...c("fee"),InputProps:{endAdornment:"SEK"}})}),t.jsx(o,{item:!0,xs:12,sm:4,children:t.jsx(l,{name:"responsibleContacts",control:u,render:({field:a})=>t.jsx(d,{multiple:!0,limitTags:2,disableCloseOnSelect:!0,id:"multiple-contacts",options:p,getOptionKey:e=>e.id,getOptionLabel:e=>e.contactName,isOptionEqualToValue:(e,r)=>e.id===r.id,value:a.value||[],onChange:(e,r)=>a.onChange(r),renderInput:e=>t.jsx(i,{...e,label:"Ansvariga kontakter",variant:"outlined",fullWidth:!0,error:!!h.responsibleContacts}),renderTags:(e,r)=>e.map((y,C)=>v.createElement(S,{...r({index:C}),key:y.id,label:y.contactName}))})})}),t.jsx(o,{item:!0,xs:12,sm:4,children:t.jsx(l,{name:"externalContactId",control:u,render:({field:a})=>t.jsx(d,{options:p,getOptionKey:e=>e.id,getOptionLabel:e=>e.contactName,value:p.find(e=>e.id===a.value)||null,onChange:(e,r)=>a.onChange(r?r.id:void 0),renderInput:e=>t.jsx(i,{...e,label:"Extern kontakt",variant:"outlined",fullWidth:!0})})})}),t.jsx(o,{item:!0,xs:12,sm:4,children:t.jsx(l,{name:"companyId",control:u,render:({field:a})=>t.jsx(d,{options:f,getOptionKey:e=>e.id,getOptionLabel:e=>e.companyName,value:f.find(e=>e.id===a.value)||null,onChange:(e,r)=>a.onChange(r?r.id:void 0),renderInput:e=>t.jsx(i,{...e,label:"Bolag",variant:"outlined",fullWidth:!0})})})})]})})},Q=()=>{const n=g(),{showSnackbar:s}=x();return b({mutationFn:q,onSuccess:()=>{n.invalidateQueries({queryKey:["assignments"]}),s("Uppdrag skapat!")},onError:()=>{s("Ett fel uppstod när uppgiften skulle skapas.","error")}})},L=()=>{const n=g(),{showSnackbar:s}=x();return b({mutationFn:O,onSuccess:()=>{n.invalidateQueries({queryKey:["assignments"]}),s("Uppdrag uppdaterat!")},onError:()=>{s("Ett fel uppstod när uppgiften skulle uppdateras.","error")}})},G=()=>{const n=g(),{showSnackbar:s}=x();return b({mutationFn:_,onSuccess:()=>{n.invalidateQueries({queryKey:["assignments"]}),s("Uppdrag borttaget!")},onError:()=>{s("Ett fel uppstod när uppgiften skulle tas bort.","error")}})};export{U as A,L as a,G as b,Q as u};
//# sourceMappingURL=useAssignmentsMutations-C88PMQrZ.js.map
