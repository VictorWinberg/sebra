import{r as v,j as t,G as i,A as u,C as k,w as g,x,y as f,z as b}from"./index-5b_gEWUj.js";import{u as E,C as d}from"./index.esm--lV-d0Kt.js";import{u as w}from"./useCompaniesQueries-CTvg8p81.js";import{u as I}from"./useContactsQueries-C_poDjts.js";import{S as L,A as m}from"./SebraForm-Bp24gSfY.js";import{u as q,c as O,b as _,d as F,e as K,f as N,g as Q}from"./useAssignmentsQueries-ByAY9Jlr.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new s.Error().stack;o&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[o]="7cd96c66-717e-47e2-810a-673fdcf52d21",s._sentryDebugIdIdentifier="sentry-dbid-7cd96c66-717e-47e2-810a-673fdcf52d21")}catch{}})();const z=({formProps:s,...o})=>{const{data:r=[]}=q(),{data:c=[]}=I(),{data:h=[]}=w(),{register:p,control:l,formState:{errors:y},handleSubmit:A}=E(s),j=v.useMemo(()=>[...new Set(r.map(a=>a.status))],[r]);return t.jsx(L,{...o,handleSubmit:A,children:t.jsxs(i,{container:!0,spacing:2,children:[t.jsx(i,{item:!0,xs:12,children:t.jsx(u,{fullWidth:!0,label:"Uppdragsnamn",type:"text",margin:"none",...p("assignmentName",{required:!0}),error:!!y.assignmentName})}),t.jsx(i,{item:!0,xs:12,sm:4,children:t.jsx(d,{name:"status",control:l,render:({field:a})=>t.jsx(m,{freeSolo:!0,options:j,value:j.find(e=>e===a.value)||null,onChange:(e,n)=>a.onChange(n??""),renderInput:e=>t.jsx(u,{...e,label:"Status",variant:"outlined",fullWidth:!0})})})}),t.jsx(i,{item:!0,xs:12,sm:4,children:t.jsx(u,{fullWidth:!0,label:"Typ",margin:"none",type:"text",...p("type")})}),t.jsx(i,{item:!0,xs:12,sm:4,children:t.jsx(u,{fullWidth:!0,label:"Arvode",margin:"none",type:"number",...p("fee",{valueAsNumber:!0}),InputProps:{endAdornment:"SEK"}})}),t.jsx(i,{item:!0,xs:12,sm:4,children:t.jsx(d,{name:"responsibleContacts",control:l,render:({field:a})=>t.jsx(m,{multiple:!0,limitTags:2,disableCloseOnSelect:!0,id:"multiple-contacts",options:c,getOptionKey:e=>e.id,getOptionLabel:e=>e.contactName,isOptionEqualToValue:(e,n)=>e.id===n.id,value:a.value||[],onChange:(e,n)=>a.onChange(n),renderInput:e=>t.jsx(u,{...e,label:"Ansvariga kontakter",variant:"outlined",fullWidth:!0,error:!!y.responsibleContacts}),renderTags:(e,n)=>e.map((C,S)=>v.createElement(k,{...n({index:S}),key:C.id,label:C.contactName}))})})}),t.jsx(i,{item:!0,xs:12,sm:4,children:t.jsx(d,{name:"externalContact",control:l,render:({field:a})=>t.jsx(m,{options:c,getOptionKey:e=>e.id,getOptionLabel:e=>e.contactName,value:c.find(e=>{var n;return e.id===((n=a.value)==null?void 0:n.id)})||null,onChange:(e,n)=>a.onChange(n??void 0),renderInput:e=>t.jsx(u,{...e,label:"Extern kontakt",variant:"outlined",fullWidth:!0})})})}),t.jsx(i,{item:!0,xs:12,sm:4,children:t.jsx(d,{name:"company",control:l,render:({field:a})=>t.jsx(m,{options:h,getOptionKey:e=>e.id,getOptionLabel:e=>e.companyName,value:h.find(e=>{var n;return e.id===((n=a.value)==null?void 0:n.id)})||null,onChange:(e,n)=>a.onChange(n??void 0),renderInput:e=>t.jsx(u,{...e,label:"Bolag",variant:"outlined",fullWidth:!0})})})})]})})},B=()=>{const{data:s}=g(),o=x(),{showSnackbar:r}=f();return b({mutationFn:s?O:_,onSuccess:()=>{o.invalidateQueries({queryKey:["assignments"]}),r("Uppdrag skapat!")},onError:()=>{r("Ett fel uppstod när uppgiften skulle skapas.","error")}})},P=()=>{const{data:s}=g(),o=x(),{showSnackbar:r}=f();return b({mutationFn:s?F:K,onSuccess:()=>{o.invalidateQueries({queryKey:["assignments"]}),r("Uppdrag uppdaterat!")},onError:()=>{r("Ett fel uppstod när uppgiften skulle uppdateras.","error")}})},R=()=>{const{data:s}=g(),o=x(),{showSnackbar:r}=f();return b({mutationFn:s?N:Q,onSuccess:()=>{o.invalidateQueries({queryKey:["assignments"]}),r("Uppdrag borttaget!")},onError:()=>{r("Ett fel uppstod när uppgiften skulle tas bort.","error")}})};export{z as A,P as a,R as b,B as u};
//# sourceMappingURL=useAssignmentsMutations-BRXalMwX.js.map
