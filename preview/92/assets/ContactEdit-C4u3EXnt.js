import{i as f,k as C,j as t,B as b,S as j,f as s,l as h,T as I}from"./index-Ck7X9mQB.js";import{A as k}from"./AssignmentTable-FSkTWFj_.js";import{u as v}from"./useAssignmentsQueries-Bc0xImUI.js";import{u as S,I as L}from"./useInteractionsQueries-DW95hoLz.js";import{C as T}from"./ContentTabs-cPwhJzB4.js";import{a as y}from"./DataTable-DNvItwIO.js";import{F as A}from"./FlexGrow-Buvikwpb.js";import{f as B}from"./date-BEBTfK6e.js";import{u as D,a as F,b as P,C as w}from"./useContactsMutations-BCeD-D89.js";import{a as E}from"./useContactsQueries-C16oE9uJ.js";import"./useSnackbar-DP4Y4pMD.js";import"./MoreHoriz-CM4b9kbz.js";import"./index.esm-CymWYf1D.js";import"./Tooltip-DOAe3_K6.js";import"./useAssignmentsMutations-EjIdYu6n.js";import"./useCompaniesQueries-9cNhdPpr.js";import"./useQueryParam-CFpfVf_a.js";const Z=()=>{const e=f(),n=C(),{data:o,isLoading:r}=E(e.id==="new"?void 0:Number(e.id)),{mutate:i}=D(),{mutate:c}=F(),{mutate:m}=P(),{data:d=[],isLoading:l}=v(),{data:p=[],isLoading:u}=S(o?{contactId:o.contactId}:void 0),g=a=>{o?c(a):i(a,{onSuccess:x=>n(`/home/contacts/${x.contactId}`)})};if(!r)return t.jsx(w,{formProps:{values:o},onSubmit:g,renderTopContent:()=>t.jsxs(b,{sx:{position:"relative",mt:1,mb:3},children:[t.jsxs(j,{spacing:2,direction:"row",sx:{position:"absolute",right:0},children:[o&&t.jsx(y,{onClick:()=>m(o,{onSuccess:()=>n("..")}),children:a=>t.jsx(s,{variant:"outlined",color:"error",...h(a),children:"Ta bort"})}),t.jsx(s,{variant:"outlined",color:"primary",onClick:()=>n(-1),children:"Avbryt"}),t.jsx(s,{type:"submit",variant:"contained",color:"primary",children:"Spara"})]}),t.jsx(I,{variant:"h4",color:"primary",children:o?"Redigera kontakt":"Lägg till kontakt"})]}),renderBottomContent:()=>o&&t.jsx(A,{children:t.jsx(T,{tabs:[{id:"interactions",label:"Interaktioner",content:t.jsx(L,{interactions:p,isLoading:u,defaultValues:{contacts:[o],interactionDate:B()}})},{id:"seeking",label:"Söker",content:t.jsx(t.Fragment,{children:"Söker..."})},{id:"assignments",label:"Uppdrag",content:t.jsx(k,{assignments:d.filter(a=>a.externalContactPersonId===o.contactId||a.responsiblePersonId===o.contactId),isLoading:l})}]})})})};export{Z as default};
