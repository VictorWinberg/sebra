import{i as f,k as C,j as t,B as b,S as j,f as s,l as h,T as I}from"./index-Cb92esh7.js";import{A as k}from"./AssignmentTable-DDraT3GD.js";import{u as v}from"./useAssignmentsQueries-CKLyzH17.js";import{u as S,I as L}from"./useInteractionsQueries-VfAo0Lvq.js";import{C as T}from"./ContentTabs-Do7i-epM.js";import{a as y}from"./DataTable-DFMlW2_u.js";import{F as A}from"./FlexGrow-DDYQqbDr.js";import{f as B}from"./date-lWOLOvqo.js";import{u as D,a as F,b as P,C as w}from"./useContactsMutations-Cn9zjaXp.js";import{a as E}from"./useContactsQueries-C6cu2fJG.js";import"./useSnackbar-BO7AuKFX.js";import"./MoreHoriz-DeyYpqij.js";import"./index.esm-CeMCaMQX.js";import"./Tooltip-CURAw7_K.js";import"./useAssignmentsMutations-rShx42oT.js";import"./useCompaniesQueries-wbvMxk55.js";import"./useQueryParam-DfTgo7W8.js";const Z=()=>{const e=f(),n=C(),{data:o,isLoading:r}=E(e.id==="new"?void 0:Number(e.id)),{mutate:i}=D(),{mutate:c}=F(),{mutate:m}=P(),{data:d=[],isLoading:l}=v(),{data:p=[],isLoading:u}=S(o?{contactId:o.contactId}:void 0),g=a=>{o?c(a):i(a,{onSuccess:x=>n(`/home/contacts/${x.contactId}`)})};if(!r)return t.jsx(w,{formProps:{values:o},onSubmit:g,renderTopContent:()=>t.jsxs(b,{sx:{position:"relative",mt:1,mb:3},children:[t.jsxs(j,{spacing:2,direction:"row",sx:{position:"absolute",right:0},children:[o&&t.jsx(y,{onClick:()=>m(o,{onSuccess:()=>n("..")}),children:a=>t.jsx(s,{variant:"outlined",color:"error",...h(a),children:"Ta bort"})}),t.jsx(s,{variant:"outlined",color:"primary",onClick:()=>n(-1),children:"Avbryt"}),t.jsx(s,{type:"submit",variant:"contained",color:"primary",children:"Spara"})]}),t.jsx(I,{variant:"h4",color:"primary",children:o?"Redigera kontakt":"Lägg till kontakt"})]}),renderBottomContent:()=>o&&t.jsx(A,{children:t.jsx(T,{tabs:[{id:"interactions",label:"Interaktioner",content:t.jsx(L,{interactions:p,isLoading:u,defaultValues:{contacts:[o],interactionDate:B()}})},{id:"seeking",label:"Söker",content:t.jsx(t.Fragment,{children:"Söker..."})},{id:"assignments",label:"Uppdrag",content:t.jsx(k,{assignments:d.filter(a=>a.externalContactPersonId===o.contactId||a.responsiblePersonId===o.contactId),isLoading:l})}]})})})};export{Z as default};
