import{j as t,G as a,w as i,r as v,C as S,t as c}from"./index-B5Wn1pV6.js";import{u as k,C as l}from"./index.esm-DVlgypon.js";import{u as A}from"./useCompaniesQueries-Bc9ksEnf.js";import{u as E}from"./useContactsQueries-D3qhIykf.js";import{S as q,A as m,u as g,a as x}from"./useSnackbar-DKcC1YFu.js";import{b as O,c as F,d as I,e as K}from"./useAssignmentsQueries-CLWaiOM8.js";const _=({formProps:o,...r})=>{const{data:h=[]}=O(),{data:d=[]}=E(),{data:j=[]}=A(),{register:p,control:u,formState:{errors:b},handleSubmit:f}=k(o);return t.jsx(q,{...r,handleSubmit:f,children:t.jsxs(a,{container:!0,spacing:2,children:[t.jsx(a,{item:!0,xs:12,children:t.jsx(i,{fullWidth:!0,label:"Uppdragsnamn",type:"text",margin:"none",...p("assignmentName",{required:!0}),error:!!b.assignmentName})}),t.jsx(a,{item:!0,xs:12,sm:4,children:t.jsx(l,{name:"status",control:u,render:({field:s})=>t.jsx(m,{freeSolo:!0,options:h,value:h.find(e=>e===s.value)||null,onChange:(e,n)=>s.onChange(n??""),renderInput:e=>t.jsx(i,{...e,label:"Status",variant:"outlined",fullWidth:!0})})})}),t.jsx(a,{item:!0,xs:12,sm:4,children:t.jsx(i,{fullWidth:!0,label:"Typ",margin:"none",type:"text",...p("type")})}),t.jsx(a,{item:!0,xs:12,sm:4,children:t.jsx(i,{fullWidth:!0,label:"Arvode",margin:"none",type:"number",...p("fee"),InputProps:{endAdornment:"SEK"}})}),t.jsx(a,{item:!0,xs:12,sm:4,children:t.jsx(l,{name:"responsibleContacts",control:u,render:({field:s})=>t.jsx(m,{multiple:!0,limitTags:2,disableCloseOnSelect:!0,id:"multiple-contacts",options:d,getOptionKey:e=>e.id,getOptionLabel:e=>e.contactName,isOptionEqualToValue:(e,n)=>e.id===n.id,value:s.value||[],onChange:(e,n)=>s.onChange(n),renderInput:e=>t.jsx(i,{...e,label:"Ansvariga kontakter",variant:"outlined",fullWidth:!0,error:!!b.responsibleContacts}),renderTags:(e,n)=>e.map((C,y)=>v.createElement(S,{...n({index:y}),key:C.id,label:C.contactName}))})})}),t.jsx(a,{item:!0,xs:12,sm:4,children:t.jsx(l,{name:"externalContactId",control:u,render:({field:s})=>t.jsx(m,{options:d,getOptionKey:e=>e.id,getOptionLabel:e=>e.contactName,value:d.find(e=>e.id===s.value)||null,onChange:(e,n)=>s.onChange(n?n.id:void 0),renderInput:e=>t.jsx(i,{...e,label:"Extern kontakt",variant:"outlined",fullWidth:!0})})})}),t.jsx(a,{item:!0,xs:12,sm:4,children:t.jsx(l,{name:"companyId",control:u,render:({field:s})=>t.jsx(m,{options:j,getOptionKey:e=>e.id,getOptionLabel:e=>e.companyName,value:j.find(e=>e.id===s.value)||null,onChange:(e,n)=>s.onChange(n?n.id:void 0),renderInput:e=>t.jsx(i,{...e,label:"Bolag",variant:"outlined",fullWidth:!0})})})})]})})},L=()=>{const o=c(),{showSnackbar:r}=g();return x({mutationFn:F,onSuccess:()=>{o.invalidateQueries({queryKey:["assignments"]}),r("Uppdrag skapat!")},onError:()=>{r("Ett fel uppstod när uppgiften skulle skapas.","error")}})},G=()=>{const o=c(),{showSnackbar:r}=g();return x({mutationFn:I,onSuccess:()=>{o.invalidateQueries({queryKey:["assignments"]}),r("Uppdrag uppdaterat!")},onError:()=>{r("Ett fel uppstod när uppgiften skulle uppdateras.","error")}})},B=()=>{const o=c(),{showSnackbar:r}=g();return x({mutationFn:K,onSuccess:()=>{o.invalidateQueries({queryKey:["assignments"]}),r("Uppdrag borttaget!")},onError:()=>{r("Ett fel uppstod när uppgiften skulle tas bort.","error")}})};export{_ as A,G as a,B as b,L as u};
