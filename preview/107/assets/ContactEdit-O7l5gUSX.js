import{k as I,l as C,r as c,j as o,B as h,T as y,F as j,m as v}from"./index-Dl4XAGHA.js";import{A as D}from"./AssignmentTable-CumkCJr0.js";import{u as L}from"./useAssignmentsQueries-DGTiaBcs.js";import{u as k,I as w}from"./useInteractionsQueries-CUZk4OIv.js";import{C as T}from"./ContentTabs-C3K3dZpX.js";import{F as A}from"./SebraForm-Buo_nVLS.js";import{f as F}from"./date-5MLBmrxt.js";import{u as B,a as E,b as S,C as _}from"./useContactsMutations-DaJq3ZWi.js";import{a as H}from"./useContactsQueries-BSwGKqDL.js";import"./DataTable-KrIayMax.js";import"./useQueryParam-OOHpWbWx.js";import"./Tooltip-BgxD-eQP.js";import"./SebraDialog-DuIQz_h4.js";import"./useAssignmentsMutations-Cr10V4cH.js";import"./index.esm-CNmaJeLN.js";import"./useCompaniesQueries-D5QFk1VV.js";import"./Tabs-BnkWJ6vk.js";import"./MoreHoriz-DDxmLduF.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new e.Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="5ea53e3d-2d5a-4666-9a43-e73b498a40c9",e._sentryDebugIdIdentifier="sentry-dbid-5ea53e3d-2d5a-4666-9a43-e73b498a40c9")}catch{}})();const tt=()=>{const e=I(),a=C(),{data:t,isLoading:m}=H(e.id==="new"?void 0:Number(e.id)),{mutate:d}=B(),{mutate:l}=E(),{mutate:p}=S(),{data:i=[],isLoading:u}=L(),f=c.useMemo(()=>i.filter(s=>s.responsibleContacts.some(n=>n.contactId===(t==null?void 0:t.contactId))||s.externalContactId===(t==null?void 0:t.contactId)),[i,t]),{data:r=[],isLoading:g}=k(),b=c.useMemo(()=>r.filter(s=>s.contacts.some(n=>n.contactId===(t==null?void 0:t.contactId))),[r,t]),x=s=>{t?l(s):d(s,{onSuccess:n=>a(`/home/contacts/${n.contactId}`)})};if(!m)return o.jsx(_,{formProps:{values:t},onSubmit:x,renderTopContent:()=>o.jsxs(h,{sx:{position:"relative",mt:1,mb:3},children:[o.jsx(y,{variant:"h4",color:"primary",children:t?"Redigera kontakt":"LÃ¤gg till kontakt"}),o.jsx(A,{sx:{position:"absolute",top:0,right:0},onDelete:t?()=>p(t,{onSuccess:()=>a("..")}):void 0,onCancel:()=>a(-1)})]}),renderBottomContent:()=>t&&o.jsx(j,{sx:{mt:1,minHeight:`calc(100vh - ${v}px - 1rem)`},children:o.jsx(T,{tabs:[{id:"interactions",label:"Interaktioner",content:o.jsx(w,{interactions:b,isLoading:g,defaultValues:{contacts:[t],interactionDate:F()}})},{id:"assignments",label:"Uppdrag",content:o.jsx(D,{assignments:f,isLoading:u})}]})})})};export{tt as default};
//# sourceMappingURL=ContactEdit-O7l5gUSX.js.map
