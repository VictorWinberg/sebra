import{j as t,G as o,x as i,r as I,C as v,t as g,w as x}from"./index-Dl4XAGHA.js";import{u as S,C as l}from"./index.esm-CNmaJeLN.js";import{u as k}from"./useCompaniesQueries-D5QFk1VV.js";import{u as A}from"./useContactsQueries-BSwGKqDL.js";import{S as E,A as d,u as b}from"./SebraForm-Buo_nVLS.js";import{b as w,c as q,d as O,e as _}from"./useAssignmentsQueries-DGTiaBcs.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new n.Error().stack;s&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[s]="d0a499e7-07b7-4785-8555-f7f283888b6e",n._sentryDebugIdIdentifier="sentry-dbid-d0a499e7-07b7-4785-8555-f7f283888b6e")}catch{}})();const U=({formProps:n,...s})=>{const{data:c=[]}=w(),{data:m=[]}=A(),{data:f=[]}=k(),{register:p,control:u,formState:{errors:y},handleSubmit:j}=S(n);return t.jsx(E,{...s,handleSubmit:j,children:t.jsxs(o,{container:!0,spacing:2,children:[t.jsx(o,{item:!0,xs:12,children:t.jsx(i,{fullWidth:!0,label:"Uppdragsnamn",type:"text",margin:"none",...p("assignmentName",{required:!0}),error:!!y.assignmentName})}),t.jsx(o,{item:!0,xs:12,sm:4,children:t.jsx(l,{name:"status",control:u,render:({field:r})=>t.jsx(d,{freeSolo:!0,options:c,value:c.find(e=>e===r.value)||null,onChange:(e,a)=>r.onChange(a??""),renderInput:e=>t.jsx(i,{...e,label:"Status",variant:"outlined",fullWidth:!0})})})}),t.jsx(o,{item:!0,xs:12,sm:4,children:t.jsx(i,{fullWidth:!0,label:"Typ",margin:"none",type:"text",...p("type")})}),t.jsx(o,{item:!0,xs:12,sm:4,children:t.jsx(i,{fullWidth:!0,label:"Arvode",margin:"none",type:"number",...p("fee"),InputProps:{endAdornment:"SEK"}})}),t.jsx(o,{item:!0,xs:12,sm:4,children:t.jsx(l,{name:"responsibleContacts",control:u,render:({field:r})=>t.jsx(d,{multiple:!0,limitTags:2,disableCloseOnSelect:!0,id:"multiple-contacts",options:m,getOptionKey:e=>e.contactId,getOptionLabel:e=>e.contactName,isOptionEqualToValue:(e,a)=>e.contactId===a.contactId,value:r.value||[],onChange:(e,a)=>r.onChange(a),renderInput:e=>t.jsx(i,{...e,label:"Ansvariga kontakter",variant:"outlined",fullWidth:!0,error:!!y.responsibleContacts}),renderTags:(e,a)=>e.map((h,C)=>I.createElement(v,{...a({index:C}),key:h.contactId,label:h.contactName}))})})}),t.jsx(o,{item:!0,xs:12,sm:4,children:t.jsx(l,{name:"externalContactId",control:u,render:({field:r})=>t.jsx(d,{options:m,getOptionKey:e=>e.contactId,getOptionLabel:e=>e.contactName,value:m.find(e=>e.contactId===r.value)||null,onChange:(e,a)=>r.onChange(a?a.contactId:void 0),renderInput:e=>t.jsx(i,{...e,label:"Extern kontakt",variant:"outlined",fullWidth:!0})})})}),t.jsx(o,{item:!0,xs:12,sm:4,children:t.jsx(l,{name:"companyId",control:u,render:({field:r})=>t.jsx(d,{options:f,getOptionKey:e=>e.companyId,getOptionLabel:e=>e.companyName,value:f.find(e=>e.companyId===r.value)||null,onChange:(e,a)=>r.onChange(a?a.companyId:void 0),renderInput:e=>t.jsx(i,{...e,label:"Bolag",variant:"outlined",fullWidth:!0})})})})]})})},Q=()=>{const n=g(),{showSnackbar:s}=x();return b({mutationFn:q,onSuccess:()=>{n.invalidateQueries({queryKey:["assignments"]}),s("Uppdrag skapat!")},onError:()=>{s("Ett fel uppstod när uppgiften skulle skapas.","error")}})},L=()=>{const n=g(),{showSnackbar:s}=x();return b({mutationFn:O,onSuccess:()=>{n.invalidateQueries({queryKey:["assignments"]}),s("Uppdrag uppdaterat!")},onError:()=>{s("Ett fel uppstod när uppgiften skulle uppdateras.","error")}})},G=()=>{const n=g(),{showSnackbar:s}=x();return b({mutationFn:_,onSuccess:()=>{n.invalidateQueries({queryKey:["assignments"]}),s("Uppdrag borttaget!")},onError:()=>{s("Ett fel uppstod när uppgiften skulle tas bort.","error")}})};export{U as A,L as a,G as b,Q as u};
//# sourceMappingURL=useAssignmentsMutations-Cr10V4cH.js.map
