{"version":3,"file":"useContactsQueries-BSwGKqDL.js","sources":["../../src/features/contacts/api/contactsApi.ts","../../src/features/contacts/hooks/useContactsQueries.ts"],"sourcesContent":["import { deleteQuery, query, insertQuery, updateQuery, selectOneQuery } from '@/api/DummyDB';\nimport { Company } from '@/features/companies/api/companiesApi';\nimport { pick, toMap } from '@/utils';\n\nexport type Contact = ContactRecord & { company?: Company };\n\nexport type ContactRecord = {\n  contactId: number;\n  contactName: string;\n  email: string;\n  phone: string;\n  jobTitle: string;\n  companyId: number;\n  position: string;\n  address: string;\n  notes: string;\n  lastInteractionDate: string;\n  createdAt: string;\n  updatedAt: string;\n};\n\nexport const fetchContacts = async (): Promise<Contact[]> => {\n  const contacts = await query<Contact>(`SELECT * FROM contacts ORDER BY contact_name`);\n  const companies = toMap(await query<Company>(`SELECT * FROM companies`), 'companyId');\n\n  return contacts.map((contact) => ({ ...contact, company: companies.get(contact.companyId) }));\n};\n\nexport const fetchContact = async (contactId: number) => {\n  return await selectOneQuery<ContactRecord>('contacts', { contactId });\n};\n\nexport const createContact = async (contact: Partial<Contact>) => {\n  return await insertQuery<ContactRecord>(\n    'contacts',\n    pick(contact, [\n      'contactName',\n      'email',\n      'phone',\n      'jobTitle',\n      'companyId',\n      'position',\n      'address',\n      'notes',\n      'lastInteractionDate'\n    ])\n  );\n};\n\nexport const updateContact = async (contact: Partial<Contact>) => {\n  return await updateQuery<ContactRecord>(\n    'contacts',\n    pick(contact, [\n      'contactName',\n      'email',\n      'phone',\n      'jobTitle',\n      'companyId',\n      'position',\n      'address',\n      'notes',\n      'lastInteractionDate'\n    ]),\n    pick(contact, ['contactId'])\n  );\n};\n\nexport const deleteContact = async ({ contactId }: Pick<Contact, 'contactId'>) => {\n  return await deleteQuery<ContactRecord>('contacts', { contactId });\n};\n","import { useQuery } from '@tanstack/react-query';\n\nimport { fetchContact, fetchContacts } from '../api/contactsApi';\n\nexport const useContacts = () => {\n  return useQuery({ queryKey: ['contacts'], queryFn: fetchContacts });\n};\n\nexport const useContact = (contactId: number | undefined) => {\n  return useQuery({\n    queryKey: ['contact', contactId],\n    queryFn: () => fetchContact(contactId!),\n    enabled: !!contactId\n  });\n};\n"],"names":["fetchContacts","contacts","query","companies","toMap","contact","fetchContact","contactId","selectOneQuery","createContact","insertQuery","pick","updateContact","updateQuery","deleteContact","deleteQuery","useContacts","useQuery","useContact"],"mappings":"mbAqBO,MAAMA,EAAgB,SAAgC,CACrD,MAAAC,EAAW,MAAMC,EAAe,8CAA8C,EAC9EC,EAAYC,EAAM,MAAMF,EAAe,yBAAyB,EAAG,WAAW,EAEpF,OAAOD,EAAS,IAAKI,IAAa,CAAE,GAAGA,EAAS,QAASF,EAAU,IAAIE,EAAQ,SAAS,GAAI,CAC9F,EAEaC,EAAe,MAAOC,GAC1B,MAAMC,EAA8B,WAAY,CAAE,UAAAD,CAAW,CAAA,EAGzDE,EAAgB,MAAOJ,GAC3B,MAAMK,EACX,WACAC,EAAKN,EAAS,CACZ,cACA,QACA,QACA,WACA,YACA,WACA,UACA,QACA,qBAAA,CACD,CAAA,EAIQO,EAAgB,MAAOP,GAC3B,MAAMQ,EACX,WACAF,EAAKN,EAAS,CACZ,cACA,QACA,QACA,WACA,YACA,WACA,UACA,QACA,qBAAA,CACD,EACDM,EAAKN,EAAS,CAAC,WAAW,CAAC,CAAA,EAIlBS,EAAgB,MAAO,CAAE,UAAAP,KAC7B,MAAMQ,EAA2B,WAAY,CAAE,UAAAR,CAAW,CAAA,EChEtDS,EAAc,IAClBC,EAAS,CAAE,SAAU,CAAC,UAAU,EAAG,QAASjB,EAAe,EAGvDkB,EAAcX,GAClBU,EAAS,CACd,SAAU,CAAC,UAAWV,CAAS,EAC/B,QAAS,IAAMD,EAAaC,CAAU,EACtC,QAAS,CAAC,CAACA,CAAA,CACZ"}