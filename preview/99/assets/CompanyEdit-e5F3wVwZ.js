import{j as t,g as y,L as h,i as b,k as f,r as j,B as k,S as I,f as l,l as L,T as v,m as S}from"./index-CeKf2DZs.js";import{A as T}from"./AssignmentTable-C76fjAlk.js";import{u as F}from"./useAssignmentsQueries-D97bVRCh.js";import{D,a as K}from"./DataTable-DqTsTDXe.js";import{S as w}from"./SebraDialog-770DOqFs.js";import{u as A,a as E,b as R,C as $}from"./useContactsMutations-DCajXeu6.js";import{u as B}from"./useContactsQueries-CL4mKFFv.js";import{C as N}from"./ContentTabs-BjJXUP-c.js";import{F as U}from"./FlexGrow-seNbYKZj.js";import{u as V,a as H,b as P,C as Y}from"./useCompaniesMutations-BTRMOH7b.js";import{a as G}from"./useCompaniesQueries-BZDdpeKu.js";import"./useAssignmentsMutations-BgEX5EoA.js";import"./index.esm-DYLOZ1Fa.js";import"./useSnackbar-CnUs8Pc_.js";import"./MoreHoriz-D8l90nL2.js";import"./Tooltip-sO0k2138.js";import"./useQueryParam-D-WGmo3_.js";const J=({contacts:r,isLoading:n,defaultValues:e})=>{const{mutate:i}=A(),{mutate:c}=E(),{mutate:m}=R();return t.jsx(D,{data:r,getRowId:a=>`${a.contactId}`,state:{isLoading:n},columns:[{accessorKey:"contactName",header:"Namn",Cell:({cell:a,row:s})=>t.jsx(y,{component:h,to:`/home/contacts/${s.original.contactId}`,children:a.getValue()})},{accessorKey:"email",header:"Email"},{accessorKey:"jobTitle",header:"Jobbtitel"},{accessorKey:"phone",header:"Telefonnummer"}],renderEditRowDialogContent:({row:a,table:s})=>t.jsx(w,{table:s,row:a,titles:{creating:"Lägg till kontakt",editing:"Redigera kontakt"},FormComponent:$,defaultValues:e}),onCreate:a=>i(a),onUpdate:a=>c(a),onDelete:a=>m(a)})},ct=()=>{const r=b(),n=f(),{data:e,isLoading:i}=G(r.id==="new"?void 0:Number(r.id)),{mutate:c}=V(),{mutate:m}=H(),{mutate:a}=P(),{data:s=[],isLoading:p}=B(),{data:d=[],isLoading:u}=F(),g=j.useMemo(()=>d.filter(o=>o.companyId===(e==null?void 0:e.companyId)),[d,e]),C=o=>{e?m(o):c(o,{onSuccess:x=>n(`/home/companies/${x.companyId}`)})};if(!i)return t.jsx(t.Fragment,{children:t.jsx(Y,{formProps:{values:e},onSubmit:C,renderTopContent:()=>t.jsxs(k,{sx:{position:"relative",mt:1,mb:3},children:[t.jsxs(I,{spacing:2,direction:"row",sx:{position:"absolute",right:0},children:[e&&t.jsx(K,{onClick:()=>a(e,{onSuccess:()=>n("..")}),children:o=>t.jsx(l,{variant:"outlined",color:"error",...L(o),children:"Ta bort"})}),t.jsx(l,{variant:"outlined",color:"primary",onClick:()=>n(-1),children:"Avbryt"}),t.jsx(l,{type:"submit",variant:"contained",color:"primary",children:"Spara"})]}),t.jsx(v,{variant:"h4",color:"primary",children:e?"Redigera bolag":"Lägg till bolag"})]}),renderBottomContent:()=>e&&t.jsx(U,{sx:{mt:1,minHeight:`calc(100vh - ${S}px - 1rem)`},children:t.jsx(N,{tabs:[{id:"interactions",label:"Interaktioner",content:t.jsx(t.Fragment,{children:"Interaktioner..."})},{id:"contacts",label:"Kontakter",content:t.jsx(J,{contacts:s.filter(o=>o.companyId===e.companyId),isLoading:p,defaultValues:{companyId:e.companyId}})},{id:"seeking",label:"Söker",content:t.jsx(t.Fragment,{children:"Söker..."})},{id:"assignments",label:"Uppdrag",content:t.jsx(T,{assignments:g,isLoading:u,defaultValues:{companyId:e.companyId}})},{id:"kyc",label:"KYC",content:t.jsx(t.Fragment,{children:"KYC..."})}]})})})})};export{ct as default};
