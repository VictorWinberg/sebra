import{r as C,j as s,B as j,f as g}from"./index-D-ocvujd.js";import{D as A,d as D}from"./DataTable-C1lTF_-n.js";import{F as S}from"./FlexGrow-RtNkhMTn.js";import{A as b,u as v,a as T,b as B}from"./useAssignmentsMutations-Bk2WcfmF.js";import{D as E,a as F,C as y}from"./useSnackbar-FKi4dRLH.js";import{a as I}from"./AssignmentConfig-B1juXLQD.js";import{u as L}from"./useAssignmentsQueries-CG64215t.js";import"./useQueryParam-k4YJYB-2.js";import"./Tooltip-BqWSFl2W.js";import"./index.esm-DNzt2WsN.js";import"./useCompaniesQueries-BR5bPGwy.js";import"./useContactsQueries-nScrN7e5.js";import"./MoreHoriz-DFlBm3TD.js";import"./date-BZLFgMfh.js";function P(n,e){const{getState:o,options:{onCreatingRowCancel:i,onCreatingRowSave:a,onEditingRowCancel:t,onEditingRowSave:r},setCreatingRow:m,setEditingRow:c}=n,{creatingRow:l,editingRow:d,isSaving:h}=o(),p=(l==null?void 0:l.id)===e.id,x=(d==null?void 0:d.id)===e.id,[u,f]=C.useState(e.original);return{creatingRow:l,isSaving:h,values:u,setValues:f,handleCancel:()=>{p?(i==null||i({row:e,table:n}),m(null)):x&&(t==null||t({row:e,table:n}),c(null))},handleSubmit:()=>{p?a==null||a({exitCreatingMode:()=>m(null),row:e,table:n,values:u}):x&&(r==null||r({exitEditingMode:()=>c(null),row:e,table:n,values:u}))}}}const k=({table:n,row:e})=>{const{creatingRow:o,isSaving:i,values:a,setValues:t,handleCancel:r,handleSubmit:m}=P(n,e);return s.jsxs(s.Fragment,{children:[s.jsx(E,{variant:"h4",color:"primary",children:o?"Lägg till uppdrag":"Redigera uppdrag"}),s.jsx(F,{children:s.jsx(b,{sx:{mt:1},formProps:{values:a},onChange:t,onSubmit:m,renderBottomContent:()=>s.jsxs(j,{sx:{mt:3,ml:"auto"},children:[s.jsx(g,{onClick:r,sx:{minWidth:"100px"},children:"Avbryt"}),s.jsxs(g,{disabled:i,type:"submit",sx:{minWidth:"100px"},variant:"contained",children:[i&&s.jsx(y,{color:"inherit",size:18}),"Spara"]})]})})})]})},X=()=>{const{data:n=[],isLoading:e}=L(),{mutate:o}=v(),{mutate:i}=T(),{mutate:a}=B();return s.jsx(S,{children:s.jsx(A,{data:n,columns:I,getRowId:t=>`${t.assignmentId}`,state:{isLoading:e},onCreate:t=>o(t),onUpdate:t=>i(t),onDelete:t=>a(t),renderTopToolbarCustomActions:({table:t})=>s.jsx(g,{onClick:()=>t.setCreatingRow(!0),variant:"outlined",size:"small",startIcon:s.jsx(D,{}),sx:{textTransform:"none"},children:"Lägg till uppdrag"}),renderEditRowDialogContent:k})})};export{X as default};
